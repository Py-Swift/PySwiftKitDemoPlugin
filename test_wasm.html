<!DOCTYPE html>
<html>
<head><title>WASM Test</title></head>
<body>
<h1>Testing WASM Load</h1>
<div id="output"></div>
<script type="module">
const output = document.getElementById('output');

async function testWasm() {
    try {
        output.innerHTML += '<p>Loading WASM...</p>';
        const response = await fetch('demo/PySwiftKitDemo.wasm');
        const buffer = await response.arrayBuffer();
        output.innerHTML += `<p>WASM size: ${(buffer.byteLength / 1024 / 1024).toFixed(2)} MB</p>`;
        
        output.innerHTML += '<p>Compiling WASM module...</p>';
        const module = await WebAssembly.compile(buffer);
        output.innerHTML += '<p style="color: green;">✅ SUCCESS! WASM compiled successfully!</p>';
        
        // Try to instantiate
        output.innerHTML += '<p>Instantiating...</p>';
        const instance = await WebAssembly.instantiate(module, {});
        output.innerHTML += '<p style="color: green;">✅ WASM instantiated successfully!</p>';
        
    } catch (error) {
        output.innerHTML += `<p style="color: red;">❌ ERROR: ${error.message}</p>`;
        console.error('Full error:', error);
    }
}

testWasm();
</script>
</body>
</html>
